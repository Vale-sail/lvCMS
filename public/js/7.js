webpackJsonp([7],{259:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["power"],mounted:function(){this.init()},filters:{stateTag:function(t){return 1==t?"primary":2==t?"warning":3==t?"danger":void 0},stateToWord:function(t){return 1==t?"正常":2==t?"回收站":void 0},tempNameTag:function(t){return t?"warning":"danger"}},data:function(){return{selectItem:[],actionOptions:[{value:1,label:"批量删除"}],action:"",loading1:!1,remarks:[],type:"",total:1,page:1,pageSize:25,searchInfo:""}},methods:{handleSelect:function(t){this.selectItem=t},batchDelete:function(t){this.$http.post("/admin/remark/batchDelete",{keyArr:t}).then(function(t){t.body.result?(this.$message({title:"成功",message:"批量删除评论成功",type:"success"}),this.init()):this.$message.error({title:"失败",message:t.body.msg})}).catch(function(t){if(422==t.status){for(var e in t.body){var a=t.body[e];this.$message.error(a[0])}}else this.$message.error("错误：状态码"+t.status)})},batch:function(){if(!this.action)return void this.$message.error("请选择操作");var t=[],e=!0,a=!1,i=void 0;try{for(var s,n=this.selectItem[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var r=s.value;t.push(r.id)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}if(t.length<1)return void this.$message.error("当前没有选中项");1==this.action&&this.batchDelete(t)},refresh:function(){Object.assign(this.$data,this.$options.data()),this.init()},init:function(){this.loading1=!0,this.$http.post("/remark",{type:this.type?this.type:0,page:this.page,pageSize:this.pageSize,searchInfo:this.searchInfo}).then(function(t){t.body.result?(this.remarks=t.body.remark,this.total=t.body.total,this.$message({title:"成功",message:"获取信息成功",type:"success"})):this.$message.error({title:"失败",message:t.body.msg}),this.loading1=!1}).catch(function(t){if(422==t.status){for(var e in t.body){var a=t.body[e];this.$message.error(a[0])}}else this.$message.error("错误：状态码"+t.status)})},handleReply:function(t,e){var a=this;this.$prompt("回复评论","提示",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(function(t){var i=t.value;if(i.length<1)return void alert("评论不能为空");a.$http.post("/admin/remark/reply",{id:e.id,content:i}).then(function(t){t.body.result?(this.$message({title:"成功",message:"获取信息成功",type:"success"}),this.init()):this.$message.error({title:"失败",message:t.body.msg})}).catch(function(t){if(422==t.status){for(var e in t.body){var a=t.body[e];this.$message.error(a[0])}}else this.$message.error("错误：状态码"+t.status)})}).catch(function(){a.$message({type:"info",message:"取消回复"})})},handleEdit:function(t,e){var a=this;this.$prompt("编辑评论信息","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputValue:e.content}).then(function(t){var i=t.value;if(i.length<1)return void alert("评论不能为空");a.$http.post("/admin/remark/edit",{id:e.id,content:i}).then(function(t){t.body.result?(this.$message({title:"成功",message:"获取信息成功",type:"success"}),this.init()):this.$message.error({title:"失败",message:t.body.msg})}).catch(function(t){if(422==t.status){for(var e in t.body){var a=t.body[e];this.$message.error(a[0])}}else this.$message.error("错误：状态码"+t.status)})}).catch(function(){a.$message({type:"info",message:"取消编辑"})})},handleDelete:function(t,e){var a=this;this.$confirm("删除该评论与其附属评论，该操作无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){a.$http.post("/admin/remark/delete",{id:e.id}).then(function(t){t.body.result?(this.$message({message:"删除成功",type:"success"}),this.init()):this.$message.error({title:"失败",message:t.body.msg})})})},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){this.page=t}},watch:{pageSize:"init",page:"init"}}},272:function(t,e,a){e=t.exports=a(7)(),e.push([t.i,".hand{cursor:pointer;margin-right:2px}.searchRow{margin-bottom:0}.grayRow{padding:7px;background:#f2f2f2;margin:10px 0}.demo-table-expand{font-size:0}.demo-table-expand label{width:90px;color:#99a9bf}.demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:33%}",""])},528:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"grayRow"},[a("el-row",{staticClass:"searchRow"},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:t.searchInfo,callback:function(e){t.searchInfo=e},expression:"searchInfo"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},slot:"prepend",model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-option",{attrs:{label:"评论内容",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"文章标题",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"评论作者",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"评论层级",value:"4"}})],1),t._v(" "),a("el-button",{attrs:{icon:"search"},on:{click:t.init},slot:"append"})],1)],1),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"loading"},on:{click:function(e){t.refresh()}}},[t._v("刷新")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.remarks,stripe:""},on:{"selection-change":t.handleSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"#",width:"55",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"作者",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.name?a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.row.name))]):a("el-tag",{attrs:{type:t._f("tempNameTag")(e.row.tempName)}},[t._v(t._s(e.row.tempName?e.row.tempName:"游客"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容",width:"300",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"层级",width:"100",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"回复至文章",width:"250 ",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"提交于",width:"180",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.power.indexOf("editRemark")>0?a("a",{attrs:{title:"编辑"}},[a("i",{staticClass:"hand el-icon-edit",staticStyle:{color:"#7a7b0b"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}})]):t._e(),t._v(" "),t.power.indexOf("replyRemark")>0?a("a",{attrs:{title:"回复"}},[a("i",{staticClass:"hand fa fa-mail-reply",staticStyle:{color:"#3bb1ff"},on:{click:function(a){t.handleReply(e.$index,e.row)}}})]):t._e(),t._v(" "),a("a",{attrs:{href:"/article/"+e.row.articleId,target:"_blank",title:"查看文章"}},[a("i",{staticClass:"hand fa fa-file-text",staticStyle:{color:"black"}})]),t._v(" "),t.power.indexOf("deleteRemark")>0?a("a",{attrs:{title:"删除"}},[a("i",{staticClass:"hand el-icon-delete",staticStyle:{color:"red"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}})]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"grayRow"},[a("el-select",{attrs:{size:"small",placeholder:"选择批量操作"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},t._l(t.actionOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"loading"},on:{click:function(e){t.batch()}}},[t._v("应用批量操作")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.page,"page-sizes":[25,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},540:function(t,e,a){var i=a(272);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(28)("52183578",i,!0)},97:function(t,e,a){a(540);var i=a(27)(a(259),a(528),null,null);t.exports=i.exports}});