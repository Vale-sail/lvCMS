webpackJsonp([6],{260:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={props:["power"],mounted:function(){this.baseInit()},data:function(){return{loading1:!1,visit:{baseVisable:!0,detailVisable:!1,changePswVisable:!1},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}},activeTag:"baseVisable",span:18,offset:2,formLabelWidth:"120px",labelPosition:"left",userInfo:{phone:"",email:"",name:"",birth:null,sex:"1"},role:"",account:"",headPic:"",headPicChangeFlag:0,userBaseInforules:{}}},methods:{handleChange:function(e){this.userInfo.birth=e},baseInit:function(){this.loading1=!0,this.$http.get("/userInfo",{}).then(function(e){e.body.result?(this.account=e.body.userInfo.account,this.role=e.body.userInfo.role,this.headPic=e.body.userInfo.head,this.userInfo.sex=e.body.userInfo.sex+"",this.userInfo.phone=e.body.userInfo.phone,this.userInfo.email=e.body.userInfo.email,this.userInfo.name=e.body.userInfo.name,this.userInfo.birth=e.body.userInfo.birth,this.$message.success("获取基本信息成功")):this.$message.error("获取基本信息失败:"+e.body.msg),this.loading1=!1}).catch(function(e){if(422==e.status){for(var a in e.body){var t=e.body[a];this.$message.error(t[0])}}else this.$message.error("错误：状态码"+e.status);this.loading1=!1})},saveBase:function(){this.$message.info("正在提交信息"),this.loading1=!0,this.$http.post("/admin/userInfo/saveBase",{userInfo:this.userInfo,headPic:1==this.headPicChangeFlag?this.headPic:""}).then(function(e){e.body.result?(this.$message.success("保存基本信息成功"),1==this.headPicChangeFlag&&$(".head").find("img").attr("src",this.headPic),$(".name").html(this.userInfo.name)):this.$message.error("保存信息失败"),this.loading1=!1}).catch(function(e){if(422==e.status){for(var a in e.body){var t=e.body[a];this.$message.error(t[0])}}else this.$message.error("错误：状态码"+e.status);this.loading1=!1})},detailInit:function(){},headPicChange:function(){var e=$("input[name='headPic']").get(0),a=e.files[0].size;if(!/image\/\w+/.test(e.files[0].type))return void this.$message.error("只能上传图片");if(a>2097152)return void this.$message.error("图片最大为2M");var t=new FileReader;t.readAsDataURL(e.files[0]);var s=this;t.onload=function(e){s.headPic=e.target.result},this.headPicChangeFlag=1},handleTagClick:function(e){for(var a in this.visit)e.name==a?this.visit[a]=!0:this.visit[a]=!1}}}},274:function(e,a,t){a=e.exports=t(7)(),a.push([e.i,'.avatar-uploader .el-upload[data-v-915d9dd6]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader-icon[data-v-915d9dd6],.headPic[data-v-915d9dd6]{width:120px;height:120px;border-radius:60px}.avatar-uploader .el-upload[data-v-915d9dd6]:hover{border-color:#20a0ff}.avatar-uploader-icon[data-v-915d9dd6]{font-size:28px;color:#8c939d;line-height:120px;text-align:center}.avatar[data-v-915d9dd6]{width:120px;height:120px;display:block}.text[data-v-915d9dd6]{font-size:14px}.item[data-v-915d9dd6]{padding:18px 0}.clearfix[data-v-915d9dd6]:after,.clearfix[data-v-915d9dd6]:before{display:table;content:""}.clearfix[data-v-915d9dd6]:after{clear:both}.box-card[data-v-915d9dd6]{margin:30px auto;width:60%}label[data-v-915d9dd6]{font-size:20px}',""])},530:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],attrs:{"element-loading-text":"加载中"}},[t("el-card",{staticClass:"box-card"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTagClick},model:{value:e.activeTag,callback:function(a){e.activeTag=a},expression:"activeTag"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"baseVisable"}}),e._v(" "),t("el-tab-pane",{attrs:{label:"详细资料",name:"detailVisable"}}),e._v(" "),t("el-tab-pane",{attrs:{label:"修改密码",name:"changePswVisable"}})],1),e._v(" "),t("div",{staticClass:"text item"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visit.baseVisable,expression:"visit.baseVisable"}]},[t("el-form",{attrs:{"label-position":e.labelPosition,"label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"用户账号"}},[t("el-input",{attrs:{disabled:!0,size:"large","auto-complete":"off"},model:{value:e.account,callback:function(a){e.account=a},expression:"account"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"身份"}},[t("el-input",{attrs:{disabled:!0,size:"large","auto-complete":"off"},model:{value:e.role,callback:function(a){e.role=a},expression:"role"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/no","show-file-list":!1,"auto-upload":!1,"with-credentials":!0,name:"headPic",accept:"image/jpg,image/png","on-change":e.headPicChange}},[e.headPic?t("img",{staticClass:"headPic",attrs:{src:e.headPic}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.userInfo.sex,callback:function(a){e.userInfo.sex=a},expression:"userInfo.sex"}},[e._v("男")]),e._v(" "),t("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:e.userInfo.sex,callback:function(a){e.userInfo.sex=a},expression:"userInfo.sex"}},[e._v("女")]),e._v(" "),t("el-radio",{staticClass:"radio",attrs:{label:"3"},model:{value:e.userInfo.sex,callback:function(a){e.userInfo.sex=a},expression:"userInfo.sex"}},[e._v("未知")])],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"昵称",prop:"name"}},[t("el-input",{attrs:{size:"large","auto-complete":"off"},model:{value:e.userInfo.name,callback:function(a){e.userInfo.name=a},expression:"userInfo.name"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{attrs:{size:"large","auto-complete":"off"},model:{value:e.userInfo.phone,callback:function(a){e.userInfo.phone=a},expression:"userInfo.phone"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{type:"email",size:"large","auto-complete":"off"},model:{value:e.userInfo.email,callback:function(a){e.userInfo.email=a},expression:"userInfo.email"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[t("el-form-item",{attrs:{label:"生日",prop:"birth"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","picker-options":e.pickerOptions0},on:{change:e.handleChange},model:{value:e.userInfo.birth,callback:function(a){e.userInfo.birth=a},expression:"userInfo.birth"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:e.span,offset:e.offset}},[e.power.indexOf("editSelfInfo")>0?t("el-button",{staticStyle:{"margin-left":"120px"},attrs:{type:"info",size:"large"},on:{click:e.saveBase}},[e._v("保存")]):e._e(),e._v(" "),t("el-button",{attrs:{type:"info",size:"large"},on:{click:e.baseInit}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.visit.detailVisable,expression:"visit.detailVisable"}]}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.visit.changePswVisable,expression:"visit.changePswVisable"}]})])],1)],1)},staticRenderFns:[]}},542:function(e,a,t){var s=t(274);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(28)("ce3fecc6",s,!0)},98:function(e,a,t){t(542);var s=t(27)(t(260),t(530),"data-v-915d9dd6",null);e.exports=s.exports}});